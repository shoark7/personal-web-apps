{% extends 'base/base.html' %}

{% block content %}

<div id="color-bar"></div>
<form method="POST" action="">
{% csrf_token %}
<!--<svg id="note-sheet" class="alert alert-dark">-->
  <!--<foreignObject x="10" y="10" width="100" height="150">-->
        <!--<input></input>-->
  <!--</foreignObject>-->
<!--</svg>-->
  <div id="note-sheet">


  </div>
</form>

<script>
var rect_count = 0
var noteSheet = d3.select('#note-sheet')
let MOUSE = {startX: 0, startY: 0,
						 endX: 0, endY: 0};

noteSheet
  .on("mousedown", function() {
		MOUSE.startY = d3.mouse(this)[1];
		MOUSE.startX = d3.mouse(this)[0];
	})
  .on("mouseup", function() {
		MOUSE.endY = d3.mouse(this)[1];
		MOUSE.endX = d3.mouse(this)[0];
		draw();
	})

function draw() {
	if(MOUSE.endX - MOUSE.startX < 50 || MOUSE.endY - MOUSE.startY < 30) {
		return;
	}

  var width = MOUSE.endX - MOUSE.startX;
  var height = MOUSE.endY - MOUSE.startY;
  console.log('width, height: ',width, height);
  noteSheet.append('textarea')
        .attr('class', 'note')
        .style('left', MOUSE.startX+'px')
        .style('top', MOUSE.startY+'px')
        .style('width', width+'px')
        .style('height', height+'px')
}
</script>
{% endblock %}
